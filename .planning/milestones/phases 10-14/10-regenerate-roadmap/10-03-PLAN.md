---
phase: 10-regenerate-roadmap
plan: 03
type: execute
wave: 3
depends_on: [10-02]
files_modified: []
autonomous: false
requirements: [BRAIN-01, BRAIN-02, BRAIN-03]

must_haves:
  truths:
    - "Brain chat panel is gone from the dashboard"
    - "Regeneration bar appears on constraint change and disappears after use"
    - "Delta regeneration correctly preserves manually-edited blocks"
    - "AI reasoning is displayed after regeneration completes"
  artifacts:
    - path: "frontend/index.html"
      provides: "No brain chat elements, regen-command-bar present"
      contains: "regen-command-bar"
    - path: "backend/brain/routes.py"
      provides: "Working /regenerate-delta endpoint"
      contains: "regenerate-delta"
  key_links:
    - from: "Regen bar submit"
      to: "POST /regenerate-delta"
      via: "authFetch with {reason}"
      pattern: "regenerate-delta"
    - from: "POST /regenerate-delta"
      to: "calendar re-render"
      via: "renderCalendar(data.tasks, data.schedule)"
      pattern: "renderCalendar"
---

<objective>
Human verification checkpoint for Phase 10 — confirming the regeneration UI and delta logic work end-to-end.

Purpose: Verify that the "Talk to Brain" chat is gone, the regeneration bar appears conditionally, and AI delta updates work correctly in the browser.

Output: Confirmed working Phase 10 feature or actionable bug report.
</objective>

<execution_context>
@/Users/eyalatar/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eyalatar/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/10-regenerate-roadmap/10-01-SUMMARY.md
@.planning/phases/10-regenerate-roadmap/10-02-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify Phase 10 regeneration UI and delta behavior end-to-end</name>
  <action>Human verifies the complete Phase 10 feature set in a running browser session.</action>
  <what-built>
    Phase 10 complete backend + frontend:
    - DB migration: schedule_blocks.is_manually_edited column
    - PATCH /tasks/block/{id} marks blocks as manually edited when time/title changes
    - POST /regenerate-delta: compressed snapshot → Claude AI → delta parse → surgical DB update
    - Brain chat panel removed from UI
    - Regeneration command bar hidden by default, revealed on constraint change
    - Bar auto-dismisses after successful regeneration
  </what-built>
  <how-to-verify>
    1. Start the server: `cd "/Users/eyalatar/Desktop/try /studyflow/backend" &amp;&amp; python -m uvicorn server:app --reload`
    2. Open http://localhost:8000 in browser and log in.
    3. CONFIRM: The sidebar has NO "Talk to the Brain" chat panel. Only "Today's Focus" and "Exam Colors" should be visible.
    4. CONFIRM: There is no text input with placeholder "Tell the brain what to change..." anywhere on the page.
    5. Go to Settings (top-right). Change the "Neto study hours" slider by any amount. Click Save Changes.
    6. CONFIRM: A new "Schedule Changed" card appears in the sidebar with a textarea and "Regenerate" button.
    7. (If you have a schedule generated) Type "I increased my study hours, please spread tasks more evenly" in the textarea and click Regenerate.
    8. CONFIRM: A loading indicator appears, then disappears. The AI's reasoning text appears in mint color. The calendar updates.
    9. CONFIRM: After ~3 seconds, the regen bar hides itself automatically.
    10. CONFIRM: Manually drag a schedule block to a new time. Then trigger regeneration again. The manually-moved block should NOT be relocated by the AI.
  </how-to-verify>
  <verify>User confirms all 10 steps above pass without errors.</verify>
  <done>User types "approved" in the resume signal.</done>
  <resume-signal>Type "approved" if all steps pass. Describe any issues if something fails.</resume-signal>
</task>

</tasks>

<verification>
All checkpoint items confirmed by user.
</verification>

<success_criteria>
- User confirms brain chat is gone
- User confirms regen bar appears on settings change
- User confirms delta regeneration works and preserves manually-edited blocks
- User types "approved"
</success_criteria>

<output>
After completion, create `.planning/phases/10-regenerate-roadmap/10-03-SUMMARY.md`
</output>
